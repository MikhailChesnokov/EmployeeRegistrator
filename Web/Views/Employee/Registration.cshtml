@{ ViewBag.Title = "Список сотрудников"; }

<h4>Список сотрудников</h4>

<form id="ajax-form" data-ajax="true" data-ajax-method="POST" data-ajax-update="#RegistrationsTable" action="@(Url.Action<EmployeeController>(x => x.RegistrationAjax()))">

</form>

<div id="RegistrationsTable">
    
</div>

@section Scripts{
    <script type="text/javascript">
        $('#ajax-form')
            .submit();

        function registerComing(employeeId) {
            $.get(
                '@(Url.Action<RegistrationController>(x => x.RegisterComing(With.No<int>())))',
                {
                    id: employeeId
                },
                function(data) {
                    new PNotify({
                        title: 'КПП',
                        text: 'Сотрудник впущен'
                    });
                });
        }

        function registerLeaving(employeeId) {
            $.get(
                '@(Url.Action<RegistrationController>(x => x.RegisterLeaving(With.No<int>())))',
                {
                    id: employeeId
                },
                function(data) {
                    new PNotify({
                        title: 'КПП',
                        text: 'Сотрудник выпущен'
                    });
                });
        }
    </script>
}